[gd_scene load_steps=19 format=3 uid="uid://c6idgkcvhp3vc"]

[ext_resource type="PackedScene" uid="uid://bj7d4aocvbm0e" path="res://Terrain/StreetCorner/street_corner_terrain.tscn" id="1_6qklj"]
[ext_resource type="Script" uid="uid://dnqp0o40gsf8a" path="res://Objects/Street/Scripts/traffic_light_manager.gd" id="3_4wj2v"]
[ext_resource type="PackedScene" uid="uid://dmltfs83e8g7f" path="res://Objects/Car/car.tscn" id="3_o8o6p"]
[ext_resource type="Texture2D" uid="uid://wacfloxc8is" path="res://Environments/HDR/daytime.hdr" id="3_ynxnr"]
[ext_resource type="PackedScene" uid="uid://hcv53osdjj4q" path="res://Objects/Street/PrefabScenes/TrafficLightStuffs/TrafficLight.tscn" id="4_o8o6p"]
[ext_resource type="PackedScene" uid="uid://ckf2r5kqw6h5r" path="res://Objects/Street/PrefabScenes/TrafficLightStuffs/PedestrianTrafficLightWithPole.tscn" id="5_iwjyl"]
[ext_resource type="PackedScene" uid="uid://b7wmf34eitxkr" path="res://Objects/Street/PrefabScenes/TrafficLightStuffs/PedestrianTrafficLightWithoutPole.tscn" id="6_341mv"]
[ext_resource type="PackedScene" uid="uid://b74nqh5tcg66o" path="res://Objects/Park/Trees/tree.tscn" id="6_fcu0f"]
[ext_resource type="PackedScene" uid="uid://k8nnhdqlvvje" path="res://Player/player_on_keyboard.tscn" id="9_vyufj"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_o8o6p"]
panorama = ExtResource("3_ynxnr")

[sub_resource type="Sky" id="Sky_jka67"]
sky_material = SubResource("PanoramaSkyMaterial_o8o6p")

[sub_resource type="Environment" id="Environment_4wj2v"]
background_mode = 2
sky = SubResource("Sky_jka67")
ambient_light_color = Color(0.733333, 0.854902, 0.909804, 1)
ambient_light_sky_contribution = 0.0
reflected_light_source = 2

[sub_resource type="BoxShape3D" id="BoxShape3D_4wj2v"]
size = Vector3(3.9541, 0.875977, 0.935123)

[sub_resource type="BoxShape3D" id="BoxShape3D_fcu0f"]
size = Vector3(9.93359, 0.875977, 0.638184)

[sub_resource type="BoxShape3D" id="BoxShape3D_iwjyl"]
size = Vector3(4.96729, 0.875977, 0.690795)

[sub_resource type="Curve3D" id="Curve3D_4wj2v"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 1.50139, 0, 0.035614, -8.37746, -1.21807, -1.85105, 8.37746, 1.21807, 1.85105, 27.2111, 3.5551, 4.43983, -5.90817, -0.430173, -2.77597, 5.90817, 0.430173, 2.77597, 56.2671, 6.62545, 14.3077, -4.58134, -0.327091, -2.43839, 4.58134, 0.327091, 2.43839, 72.1056, 7.52629, 23.5786, -4.34604, 0.0392618, -2.74646, 4.34604, -0.0392618, 2.74646, 96.3003, 7.89992, 37.1872, 0, 0, 0, 0, 0, 0, 154.844, 8.09704, 74.0976),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0)
}
point_count = 6

[sub_resource type="Curve3D" id="Curve3D_ynxnr"]
_data = {
"points": PackedVector3Array(-2.13504, -0.379867, 1.38845, 0, 0, 0, 0.070015, 0, -1.40785, 2.97563, 0.0378065, -5.01602, -2.97563, -0.0378065, 5.01602, -13.4649, -0.0650282, 23.7251, 3.11544, 0.0911275, -4.94571, -3.11544, -0.0911275, 4.94571, -28.8382, -0.614935, 46.7648, 0.717323, 0.128403, -1.31676, -0.717323, -0.128403, 1.31676, -52.5069, -1.92038, 84.6003),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[sub_resource type="Curve3D" id="Curve3D_fcu0f"]
_data = {
"points": PackedVector3Array(-0.396322, -0.25536, 0.970993, 0.396322, 0.25536, -0.970993, -0.413326, -0.653424, 1.80665, -3.33203, 0, 5.45241, 3.33203, 0, -5.45241, 23.1384, 0.474649, -36.3602, -2.20213, -0.0983887, 3.87898, 2.20213, 0.0983887, -3.87898, 35.573, 0.595489, -57.052, 0, 0, 0, 0, 0, 0, 53.2665, 0.786281, -86.3829),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[node name="StreetCornerEnvironment" type="Node3D"]

[node name="StreetCornerTerrain" parent="." instance=ExtResource("1_6qklj")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_4wj2v")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.728969, 0.684547, 0, -0.684547, -0.728969, 0, -2.50862, 0)
light_energy = 0.825
shadow_enabled = true

[node name="StreetCorner" type="Node3D" parent="." node_paths=PackedStringArray("traffic_lights")]
script = ExtResource("3_4wj2v")
traffic_lights = [NodePath("NSTrafficLight"), NodePath("EWTrafficLight2"), NodePath("NSTrafficLight3")]

[node name="NSTrafficLight" parent="StreetCorner" node_paths=PackedStringArray("obstacle", "_pedestrian_traffic_lights") instance=ExtResource("4_o8o6p")]
transform = Transform3D(-0.847317, 0, 0.531088, 0, 1, 0, -0.531088, 0, -0.847317, -16.3581, -0.663204, -1.69925)
obstacle = NodePath("Area3D")
_pedestrian_traffic_lights = [NodePath("NSPedestrianTrafficLight4"), NodePath("NSPedestrianTrafficLight5"), NodePath("PedestrianTrafficLight")]

[node name="Area3D" type="Area3D" parent="StreetCorner/NSTrafficLight"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.00375, 0.380622, 23.1365)

[node name="CollisionShape3D" type="CollisionShape3D" parent="StreetCorner/NSTrafficLight/Area3D"]
transform = Transform3D(0.999927, 0.00984207, 0.00702336, -0.00973963, 0.999848, -0.0144715, -0.00716475, 0.0144021, 0.999871, -1.47704, 0.0620117, -0.0324402)
shape = SubResource("BoxShape3D_4wj2v")

[node name="NSPedestrianTrafficLight4" parent="StreetCorner/NSTrafficLight" instance=ExtResource("5_iwjyl")]
transform = Transform3D(0.99935, 0, 0.036033, 0, 1, 0, -0.036033, 0, 0.99935, -23.3964, 0.514276, 3.49444)

[node name="NSPedestrianTrafficLight5" parent="StreetCorner/NSTrafficLight" instance=ExtResource("6_341mv")]
transform = Transform3D(-0.998304, 0, -0.0582083, 0, 1, 0, 0.0582083, 0, -0.998304, 4.95421, 2.89741, 21.3162)

[node name="EWTrafficLight2" parent="StreetCorner" node_paths=PackedStringArray("obstacle", "_pedestrian_traffic_lights") instance=ExtResource("4_o8o6p")]
transform = Transform3D(-0.526674, 0, -0.850067, 0, 1, 0, 0.850067, 0, -0.526674, 3.60522, -0.166266, 7.64299)
obstacle = NodePath("Area3D")
direction = 1
_pedestrian_traffic_lights = [NodePath("PedestrianTrafficLight4"), NodePath("PedestrianTrafficLight3"), NodePath("PedestrianTrafficLight2"), NodePath("PedestrianTrafficLight")]

[node name="Area3D" type="Area3D" parent="StreetCorner/EWTrafficLight2"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, -5.00375, -0.136532, 23.1365)

[node name="CollisionShape3D" type="CollisionShape3D" parent="StreetCorner/EWTrafficLight2/Area3D"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, -4.80263, 0.0620117, 1.30484)
shape = SubResource("BoxShape3D_fcu0f")

[node name="PedestrianTrafficLight3" parent="StreetCorner/EWTrafficLight2" instance=ExtResource("5_iwjyl")]
transform = Transform3D(-0.999798, 0, 0.0201222, 0, 1, 0, -0.0201222, 0, -0.999798, -18.9015, -0.26806, 26.3413)

[node name="PedestrianTrafficLight4" parent="StreetCorner/EWTrafficLight2" instance=ExtResource("5_iwjyl")]
transform = Transform3D(0.996099, 0, -0.0882509, 0, 1, 0, 0.0882509, 0, 0.996099, -19.5242, 0.153695, -2.15636)

[node name="PedestrianTrafficLight2" parent="StreetCorner/EWTrafficLight2" instance=ExtResource("5_iwjyl")]
transform = Transform3D(-0.995385, 0, 0.0959672, 0, 1, 0, -0.0959672, 0, -0.995385, -1.25281, -0.484445, 23.1789)

[node name="NSTrafficLight3" parent="StreetCorner" node_paths=PackedStringArray("obstacle") instance=ExtResource("4_o8o6p")]
transform = Transform3D(0.889273, 0, -0.457377, 0, 1, 0, 0.457377, 0, 0.889273, 15.3435, -0.0123805, -12.2804)
obstacle = NodePath("Area3D")

[node name="Area3D" type="Area3D" parent="StreetCorner/NSTrafficLight3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.00375, -9.53674e-07, 23.1365)

[node name="CollisionShape3D" type="CollisionShape3D" parent="StreetCorner/NSTrafficLight3/Area3D"]
transform = Transform3D(0.988751, 0, -0.149517, 0, 1, 0, 0.149517, 0, 0.988751, -4.8064, 0.0620112, -0.275346)
shape = SubResource("BoxShape3D_iwjyl")

[node name="CarPaths" type="Node3D" parent="."]

[node name="Path1" type="Path3D" parent="CarPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -85.5275, -7.89699, -35.6942)
curve = SubResource("Curve3D_4wj2v")

[node name="PathFollow3D" type="PathFollow3D" parent="CarPaths/Path1"]
transform = Transform3D(-0.168846, -0.133105, -0.976613, 7.45058e-09, 0.990836, -0.135045, 0.985642, -0.0228017, -0.167299, 1.50139, 0, 0.035614)

[node name="Car" parent="CarPaths/Path1/PathFollow3D" instance=ExtResource("3_o8o6p")]
transform = Transform3D(-0.999627, -9.6567e-05, -0.0276601, 5.58794e-09, 1.0001, -0.00349069, 0.0276601, -0.00348978, -0.999627, 1.90735e-06, -0.0590053, 0.00805664)

[node name="Path2" type="Path3D" parent="CarPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.8342, 0, -42.106)
curve = SubResource("Curve3D_ynxnr")

[node name="PathFollow3D" type="PathFollow3D" parent="CarPaths/Path2"]
transform = Transform3D(-0.880436, -0.00108007, 0.474133, -1.16414e-10, 0.999949, 0.00227796, -0.474144, 0.00200558, -0.880417, 0.070015, 0, -1.40785)

[node name="Car" parent="CarPaths/Path2/PathFollow3D" instance=ExtResource("3_o8o6p")]
transform = Transform3D(-1.00002, 1.52912e-06, 0.000438184, 9.98087e-07, 1.00012, -0.00121268, -0.000438243, -0.00121278, -1.00004, -0.605889, -0.147922, -1.27308)

[node name="Path3D" type="Path3D" parent="CarPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -27.8241, -0.666341, 42.3775)
curve = SubResource("Curve3D_fcu0f")

[node name="PathFollow3D" type="PathFollow3D" parent="CarPaths/Path3D"]
transform = Transform3D(0.925846, -0.0894002, -0.367168, 1.49011e-08, 0.971606, -0.236575, 0.377895, 0.219031, 0.899564, -0.413326, -0.653424, 1.80665)

[node name="Car" parent="CarPaths/Path3D/PathFollow3D" instance=ExtResource("3_o8o6p")]
transform = Transform3D(-0.999582, -0.000102207, -0.0292761, 0.000381358, 0.99997, -0.016511, 0.0292737, -0.0165166, -0.999451, 0, 0, 0)

[node name="Tree1" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.94186, -1.2855, 11.2646)

[node name="Tree2" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.98779, -2.57099, 27.0838)

[node name="Tree3" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.0441, -2.57099, 34.7093)

[node name="Tree4" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -26.0972, -2.57099, 3.71307)

[node name="Tree5" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -39.0002, -2.57099, 14.2285)

[node name="Tree6" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -41.392, -2.57099, 33.483)

[node name="Tree7" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -73.2321, -6.83422, -15.1391)

[node name="Tree8" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 19.0181, -2.57099, -15.9565)

[node name="Tree9" parent="." instance=ExtResource("6_fcu0f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 24.7319, -2.57099, -29.2004)

[node name="PlayerOnKeyboard" parent="." instance=ExtResource("9_vyufj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.66257, -0.491584, -10.8068)
